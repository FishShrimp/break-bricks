{"version":3,"sources":["assets\\scripts\\controller\\GameCtl.js"],"names":["GameModel","require","cc","Class","Component","properties","gameView","ball","paddle","brickLayout","overPanel","onLoad","systemEvent","on","SystemEvent","EventType","KEY_DOWN","event","keyCode","KEY","back","director","end","physicsManager","getPhysicsManager","gameModel","startGame","init","enabled","bricksNumber","pauseGame","resumeGame","stopGame","show","score","onBallContactBrick","ballNode","brickNode","parent","addScore","minusBrick","updateScore","onBallContactGround","groundNode","onDestroy"],"mappings":";;;;;;AAAA,IAAMA,SAAS,GAAGC,OAAO,CAAC,WAAD,CAAzB;;AACAC,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,QAAQ,EAAEL,OAAO,CAAC,UAAD,CADT;AAERM,IAAAA,IAAI,EAAEN,OAAO,CAAC,MAAD,CAFL;AAGRO,IAAAA,MAAM,EAAEP,OAAO,CAAC,QAAD,CAHP;AAIRQ,IAAAA,WAAW,EAAER,OAAO,CAAC,aAAD,CAJZ;AAKRS,IAAAA,SAAS,EAAET,OAAO,CAAC,WAAD;AALV,GAHP;AAWL;AACAU,EAAAA,MAAM,EAAE,kBAAY;AAChB;AACAT,IAAAA,EAAE,CAACU,WAAH,CAAeC,EAAf,CAAkBX,EAAE,CAACY,WAAH,CAAeC,SAAf,CAAyBC,QAA3C,EAAqD,UAACC,KAAD,EAAW;AAC5D,UAAIA,KAAK,CAACC,OAAN,KAAkBhB,EAAE,CAACiB,GAAH,CAAOC,IAA7B,EAAmC;AAC/BlB,QAAAA,EAAE,CAACmB,QAAH,CAAYC,GAAZ;AACH;AACJ,KAJD;AAKA,SAAKC,cAAL,GAAsBrB,EAAE,CAACmB,QAAH,CAAYG,iBAAZ,EAAtB;AACA,SAAKC,SAAL,GAAiB,IAAIzB,SAAJ,EAAjB;AACA,SAAK0B,SAAL;AAEH,GAvBI;AAyBLC,EAAAA,IAzBK,kBAyBE;AACH,SAAKJ,cAAL,CAAoBK,OAApB,GAA8B,IAA9B;AACA,SAAKH,SAAL,CAAeE,IAAf;AAEA,SAAKrB,QAAL,CAAcqB,IAAd,CAAmB,IAAnB;AACA,SAAKpB,IAAL,CAAUoB,IAAV,CAAe,IAAf;AACA,SAAKnB,MAAL,CAAYmB,IAAZ;AACA,SAAKlB,WAAL,CAAiBkB,IAAjB,CAAsB,KAAKF,SAAL,CAAeI,YAArC;AACA,SAAKnB,SAAL,CAAeiB,IAAf,CAAoB,IAApB;AAEH,GAnCI;AAqCLD,EAAAA,SArCK,uBAqCO;AACR,SAAKC,IAAL;AACH,GAvCI;AAyCLG,EAAAA,SAzCK,uBAyCO;AACR,SAAKP,cAAL,CAAoBK,OAApB,GAA8B,KAA9B;AACH,GA3CI;AA6CLG,EAAAA,UA7CK,wBA6CQ;AACT,SAAKR,cAAL,CAAoBK,OAApB,GAA8B,IAA9B;AACH,GA/CI;AAiDLI,EAAAA,QAjDK,sBAiDM;AACP,SAAKT,cAAL,CAAoBK,OAApB,GAA8B,KAA9B;AACA,SAAKlB,SAAL,CAAeuB,IAAf,CAAoB,KAAKR,SAAL,CAAeS,KAAnC,EAA0C,KAAKT,SAAL,CAAeI,YAAf,KAAgC,CAA1E;AACH,GApDI;AAsDLM,EAAAA,kBAtDK,8BAsDcC,QAtDd,EAsDwBC,SAtDxB,EAsDmC;AACpCA,IAAAA,SAAS,CAACC,MAAV,GAAmB,IAAnB;AACA,SAAKb,SAAL,CAAec,QAAf,CAAwB,CAAxB;AACA,SAAKd,SAAL,CAAee,UAAf,CAA0B,CAA1B;AACA,SAAKlC,QAAL,CAAcmC,WAAd,CAA0B,KAAKhB,SAAL,CAAeS,KAAzC;;AACA,QAAI,KAAKT,SAAL,CAAeI,YAAf,IAA+B,CAAnC,EAAsC;AAClC,WAAKG,QAAL;AACH;AACJ,GA9DI;AAgELU,EAAAA,mBAhEK,+BAgEeN,QAhEf,EAgEyBO,UAhEzB,EAgEqC;AACtC,SAAKX,QAAL;AACH,GAlEI;AAqELY,EAAAA,SArEK,uBAqEO;AACR,SAAKrB,cAAL,CAAoBK,OAApB,GAA8B,KAA9B;AACH;AAvEI,CAAT","sourceRoot":"/","sourcesContent":["const GameModel = require('GameModel');\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        gameView: require('GameView'),\n        ball: require('Ball'),\n        paddle: require('Paddle'),\n        brickLayout: require('BrickLayout'),\n        overPanel: require('OverPanel'),\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        //安卓返回键退出\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, (event) => {\n            if (event.keyCode === cc.KEY.back) {\n                cc.director.end();\n            }\n        });\n        this.physicsManager = cc.director.getPhysicsManager();\n        this.gameModel = new GameModel();\n        this.startGame();\n\n    },\n\n    init() {\n        this.physicsManager.enabled = true;\n        this.gameModel.init();\n\n        this.gameView.init(this);\n        this.ball.init(this);\n        this.paddle.init();\n        this.brickLayout.init(this.gameModel.bricksNumber);\n        this.overPanel.init(this);\n\n    },\n\n    startGame() {\n        this.init();\n    },\n\n    pauseGame() {\n        this.physicsManager.enabled = false;\n    },\n\n    resumeGame() {\n        this.physicsManager.enabled = true;\n    },\n\n    stopGame() {\n        this.physicsManager.enabled = false;\n        this.overPanel.show(this.gameModel.score, this.gameModel.bricksNumber === 0);\n    },\n\n    onBallContactBrick(ballNode, brickNode) {\n        brickNode.parent = null;\n        this.gameModel.addScore(1);\n        this.gameModel.minusBrick(1);\n        this.gameView.updateScore(this.gameModel.score);\n        if (this.gameModel.bricksNumber <= 0) {\n            this.stopGame();\n        }\n    },\n\n    onBallContactGround(ballNode, groundNode) {\n        this.stopGame();\n    },\n\n\n    onDestroy() {\n        this.physicsManager.enabled = false;\n    }\n\n});"]}